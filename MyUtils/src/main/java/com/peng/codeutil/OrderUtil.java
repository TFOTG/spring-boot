package com.peng.codeutil;

import com.alibaba.fastjson.JSON;

import java.util.Arrays;
import java.util.HashSet;
import java.util.List;
import java.util.Set;

/**
 * @author peng.wang
 * @Description 订单工具类
 * @createTime 2020/5/28
 */
public class OrderUtil {

    public static void main(String[] args) {
        String orderIdStr22="657763436,657769773,654378370,656875811,657797958,657814570,655152017,656736036,656749202,657484484,657679095,656762600,656921909,657169005,657315816,657491269,657570930,657643971,657656007,657687784,657769849,657775401,658007258";
        String misOrderIdStr22="654378370,655152017,656736036,656749202,656762600,656875811,656921909,657169005,657315816,657484484,657491269,657570930,657643971,657656007,657687784,657679095,657763436,657769773,657769849,657775401,657792095,657797958,657814570,657914923,658007258,657479569,657782593";
        OrderUtil util=new OrderUtil();
        util.findDifferenceOrders(orderIdStr22,misOrderIdStr22,"0522");
        String orderIdStr23="657062687,657839701,657865337,657984615,658112799,658173231,656796964,657830764,657883609,657970981,657997553,658109144,658180656,658263699,656677112,657820242,657849722,657996793,658053581,658055205,658125747,651345402,653985127,655167303,657049075,657512420,657942893,658080687,658141003,658196210,658319332";
        String misOrderIdStr23="642916626,651345402,653985127,654725902,654754132,654754449,655167303,655162491,656677112,656796964,657020254,657049075,657062687,657141303,657512420,657820242,657830764,657839701,657849722,657865337,657883609,657924176,657922672,657942893,657970981,657984615,657996793,657997553,658053581,658055205,658080687,658109144,658112799,658125747,658141003,658173231,658180656,658196210,658263699,658319332";
        util.findDifferenceOrders(orderIdStr23,misOrderIdStr23,"0523");
        String orderIdStr24="654505600,656295725,656797650,656948879,657047465,657780108,657782196,657786457,657844485,658025462,658082000,658167251,658198155,658332440,658368602,658369540,658371093,658377095,658390547,658391750,658396947,658402345,658405169,658406507,658406559,658416386,658417754,658418489,658418891,658419461,658421350,658422570,658427300,658435204,658439901,658440269,658442776,658445215,658445550,658450914,658454289,658455892,658458449,658458583,658460153,658462563,658463078,658463914,658468645,658473256,658480579,658484036,658489568,658490590,658495001,658495002,658496339,658500748,658501736,658505129,658506547,658509190,658512500,658519434,658519516,658520535,658522391,658522978,658533374,658544150,658548612,658549635,658557671,658558827,658565326,658565910,658572279,658573834,658573999,658575906,658576924,658578046,658580336,658582104,658583091,658584862,658587235,658590194,658593336,658599953,658602078,658602326,658606722,658606739,658612805,654309610,656285392,657207566,657232204,657290578,657369837,657584627,657628447,657634754,657670470,657780361,657824474,657885090,657885551,657896865,658248177,658314495,658356993,658357722,658358865,658360462,658364813,658368741,658371097,658373748,658375863,658379287,658389056,658391648,658395949,658398166,658401874,658403230,658409419,658413840,658414560,658418997,658425758,658426610,658432467,658434698,658436554,658437438,658445701,658458130,658460395,658462967,658463687,658466293,658474640,658482328,658482739,658486429,658490650,658494319,658507089,658509861,658512987,658515136,658516254,658517013,658522254,658522874,658526650,658527829,658528983,658533025,658534213,658539795,658542996,658544473,658547047,658550323,658553045,658560892,658561135,658563541,658571129,658571622,658574825,658582520,658585328,658586998,658587577,658590558,658593291,658594611,658603049,658603887,658604966,658608483,658612000,648463382,656513430,656568896,656569097,656616209,656907593,656909163,657552260,657786251,657860988,657897789,657906946,658011934,658129288,658161998,658181598,658207404,658275875,658302432,658331325,658361092,658365068,658375063,658376502,658381497,658391042,658391358,658395084,658400766,658407052,658407133,658410041,658411262,658420222,658424232,658425000,658429679,658444303,658445876,658449300,658450253,658451055,658454064,658458326,658472113,658473834,658474384,658474939,658475824,658477444,658480303,658484696,658486968,658486986,658493119,658494407,658495210,658495410,658496043,658499187,658501561,658501778,658507979,658510885,658515382,658528550,658529772,658530189,658532294,658532345,658533466,658543674,658545764,658547785,658548956,658551764,658561508,658575143,658575765,658578857,658580745,658590237,658591505,658591873,658595417,658599712,658600447,658600698,658601334,658606800,658607284,658610574,658610641,658612399,651321712,653782029,656864877,657418063,657704197,657738423,657959670,657969939,657976000,658133632,658203606,658277108,658303664,658307131,658318002,658321296,658357560,658359234,658361238,658369694,658372125,658375637,658385756,658387542,658404115,658404799,658407305,658407471,658407800,658414984,658418871,658419984,658437798,658458804,658459124,658459681,658462807,658464163,658468348,658480421,658480684,658480916,658481536,658483015,658483424,658491237,658496574,658498382,658498639,658499959,658513774,658517200,658520790,658521478,658523464,658526397,658526833,658529734,658531088,658533721,658534646,658534789,658535205,658537238,658544790,658550340,658553939,658555763,658556015,658557349,658558721,658558839,658559798,658560975,658562324,658562783,658566384,658568908,658570194,658581115,658581608,658586295,658587015,658587560,658589180,658590134,658595755,658603343,658603402,658604061,658604540,658606301";
        String misOrderIdStr24="648463382,651321712,653782029,654309610,654505600,656285392,656295725,656513430,656568896,656569097,656616209,656797650,656864877,656907593,656909163,656948879,657047465,657207566,657232204,657290578,657369837,657418063,657552260,657584627,657628447,657634754,657670470,657704197,657738423,657780108,657780361,657782196,657786251,657786457,657791113,657791858,657792246,657824474,657844485,657860988,657885090,657885551,657896865,657897789,657906946,657959670,657969939,657976000,658011934,658025462,658082000,658129288,658133632,658161998,658167251,658181598,658198155,658203606,658207404,658248177,658275875,658277108,658302432,658303664,658307131,658318002,658314495,658321296,658331325,658332440,658356993,658357560,658357722,658358865,658359234,658360462,658361092,658361238,658364813,658365068,658368602,658368741,658369540,658369694,658371093,658371097,658372125,658373748,658375063,658375637,658375863,658376502,658377095,658379287,658381497,658385756,658389056,658391358,658391648,658391750,658390547,658391042,658395084,658395949,658396947,658398166,658400766,658401874,658402345,658403230,658387542,658404115,658404799,658405169,658406507,658406559,658407305,658407133,658407471,658407800,658407052,658409419,658410041,658411262,658413840,658414560,658414984,658416386,658417754,658418489,658418997,658418871,658419461,658419984,658418891,658420222,658421350,658422570,658424232,658425000,658426610,658425758,658427300,658429679,658432467,658434698,658435204,658436554,658437438,658437798,658439901,658440269,658442776,658444303,658445215,658445701,658445550,658445876,658449300,658450914,658451055,658450253,658454064,658454289,658455892,658458130,658458326,658458449,658458583,658458804,658459124,658459681,658460153,658460395,658462563,658462807,658462967,658463078,658463687,658463914,658464163,658466293,658468348,658468645,658472113,658473256,658474384,658473834,658474640,658475824,658474939,658477444,658480303,658480421,658480579,658480684,658480916,658481536,658482328,658482739,658484036,658483015,658483424,658484696,658486429,658486968,658486986,658489568,658490590,658490650,658491237,658493119,658494407,658494319,658495001,658495210,658495410,658495002,658496043,658496339,658496574,658498382,658498639,658499187,658499959,658500748,658501561,658501736,658501778,658505129,658506547,658507089,658507979,658509190,658509861,658510885,658512500,658512987,658513774,658515136,658515382,658517013,658517200,658516254,658519434,658519516,658520535,658520790,658521478,658522254,658522391,658522874,658523464,658522978,658526397,658526650,658526833,658527829,658528550,658528983,658530189,658529734,658531088,658532294,658533025,658532345,658533466,658533721,658529772,658534646,658534789,658533374,658535205,658534213,658537238,658539795,658543674,658542996,658544150,658544473,658544790,658545764,658547047,658548612,658548956,658550340,658549635,658550323,658551764,658553045,658547785,658553939,658555763,658556015,658557349,658557671,658558827,658559798,658558721,658558839,658560892,658560975,658561508,658562324,658561135,658562783,658563541,658565326,658565910,658566384,658568908,658570194,658571129,658571622,658572279,658573834,658573999,658574825,658575143,658575765,658575906,658576924,658578046,658578857,658580336,658580745,658581115,658582104,658582520,658583091,658581608,658584862,658585328,658586998,658587015,658586295,658587577,658587560,658587235,658589180,658590134,658590194,658590558,658590237,658591873,658591505,658593291,658593336,658594611,658595417,658595755,658599953,658599712,658600447,658600698,658601334,658602078,658602326,658603049,658603402,658603343,658603887,658604061,658604540,658604966,658606800,658606301,658606739,658606722,658607284,658608483,658610574,658610641,658612000,658612399,658612805";
        util.findDifferenceOrders(orderIdStr24,misOrderIdStr24,"0524");

    }

    public void findDifferenceOrders(String orderIdStr,String misOrderIdStr,String flag){
        List<String> orderId= Arrays.asList(orderIdStr.split(","));
        Set<String> orderSet=new HashSet<>();
        for (String s : orderId) {
            orderSet.add(s);
        }
        List<String> misOrderId= Arrays.asList(misOrderIdStr.split(","));
        Set<String> misOrderSet=new HashSet<>();
        for (String s : misOrderId) {
            misOrderSet.add(s);
        }

        //mis存在,订单不存在
        Set<Integer> notInOrderSet=new HashSet<>();
        for (String s : misOrderId) {
            if(!orderSet.contains(s)){
                notInOrderSet.add(Integer.valueOf(s));
            }
        }

        //订单中存在,mis不存在
        Set<Integer> notInMisSet=new HashSet<>();
        for (String s : orderId) {
            if(!misOrderSet.contains(s)){
                notInMisSet.add(Integer.valueOf(s));
            }
        }
        System.out.println(flag+"：mis存在,订单不存在:"+ JSON.toJSONString(notInOrderSet));
        System.out.println(flag+"：订单中存在,mis不存在:"+JSON.toJSONString(notInMisSet));
    }
}
